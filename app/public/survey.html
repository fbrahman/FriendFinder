<!DOCTYPE html>
<html>

<head>
    <title>Find &ndash; a &ndash; Friend</title>
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" type="text/css" href="assets/css/styleSurvey.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
</head>

<body>
    <header>
        <div class="topMenu">
            <div class="topMenu-title">Friend Finder</div>
            <ul class="topMenu-list">
                <li class="topMenu-option"><a href="/apiFriendList" id="friendList">API FriendList</a></li>
                <li class="topMenu-option"><a href="https://github.com/fbrahman/FriendFinder" id="GitRepo">Github Repo</a></li>
            </ul>
        </div>
    </header>
    <section class="mainSection">
        <div class="personalInfo">
            <div class="name"><label for="name">Name:</label><input type="text" name="name" id="nameFld"></div>
            <div class="pic"><label for="picture">Picture URL:</label><input type="text" name="picture" id="picFld"></div>
        </div>
        <div class="survey">
            <div class="questionBlock">
                <div class="question">Question 1</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns1" value="1"></li>
                        <li><input type="radio" name="numAns1" value="2"></li>
                        <li><input type="radio" name="numAns1" value="3"></li>
                        <li><input type="radio" name="numAns1" value="4"></li>
                        <li><input type="radio" name="numAns1" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 2</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns2" value="1"></li>
                        <li><input type="radio" name="numAns2" value="2"></li>
                        <li><input type="radio" name="numAns2" value="3"></li>
                        <li><input type="radio" name="numAns2" value="4"></li>
                        <li><input type="radio" name="numAns2" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 3</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns3" value="1"></li>
                        <li><input type="radio" name="numAns3" value="2"></li>
                        <li><input type="radio" name="numAns3" value="3"></li>
                        <li><input type="radio" name="numAns3" value="4"></li>
                        <li><input type="radio" name="numAns3" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 4</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns4" value="1"></li>
                        <li><input type="radio" name="numAns4" value="2"></li>
                        <li><input type="radio" name="numAns4" value="3"></li>
                        <li><input type="radio" name="numAns4" value="4"></li>
                        <li><input type="radio" name="numAns4" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 5</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns5" value="1"></li>
                        <li><input type="radio" name="numAns5" value="2"></li>
                        <li><input type="radio" name="numAns5" value="3"></li>
                        <li><input type="radio" name="numAns5" value="4"></li>
                        <li><input type="radio" name="numAns5" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 6</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns6" value="1"></li>
                        <li><input type="radio" name="numAns6" value="2"></li>
                        <li><input type="radio" name="numAns6" value="3"></li>
                        <li><input type="radio" name="numAns6" value="4"></li>
                        <li><input type="radio" name="numAns6" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 7</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns7" value="1"></li>
                        <li><input type="radio" name="numAns7" value="2"></li>
                        <li><input type="radio" name="numAns7" value="3"></li>
                        <li><input type="radio" name="numAns7" value="4"></li>
                        <li><input type="radio" name="numAns7" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 8</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns8" value="1"></li>
                        <li><input type="radio" name="numAns8" value="2"></li>
                        <li><input type="radio" name="numAns8" value="3"></li>
                        <li><input type="radio" name="numAns8" value="4"></li>
                        <li><input type="radio" name="numAns8" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 9</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns9" value="1"></li>
                        <li><input type="radio" name="numAns9" value="2"></li>
                        <li><input type="radio" name="numAns9" value="3"></li>
                        <li><input type="radio" name="numAns9" value="4"></li>
                        <li><input type="radio" name="numAns9" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="questionBlock">
                <div class="question">Question 10</div>
                <div class="answer">
                    <ul class="likert">
                        <li>Strongly Disagree</li>
                        <li><input type="radio" name="numAns10" value="1"></li>
                        <li><input type="radio" name="numAns10" value="2"></li>
                        <li><input type="radio" name="numAns10" value="3"></li>
                        <li><input type="radio" name="numAns10" value="4"></li>
                        <li><input type="radio" name="numAns10" value="5"></li>
                        <li>Strongly Agree</li>
                    </ul>
                </div>
            </div>
            <div class="submission">
                <button type ="button" class="submitbtn">Submit</button>
            </div>
        </div>
    </section>
    <footer>
        <div id="copyright">
            &#169; Copyright 2017 Fahad Rahman
        </div>
    </footer>
    <!-- jQuery and JavaScript links -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $('.submitbtn').off().click(function(){
            let name  = $('#nameFld').val().trim()||"No Name"
            let picURL = $('#picFld').val().trim()||"No picture provided"
            let numOfQuestions = $('.question').length
            let ansArray = [];
            let personObj ={};

            for (let i = 1; i <= numOfQuestions; i++){
                let ans = $(`input[name=numAns${i}]:checked`).val() || 0;
                
                ansArray.push(parseInt(ans));
            }

            personObj = { 
                name: name, 
                photo: picURL, 
                scores: ansArray 
            }

            $.post('/newperson', personObj, function(data){
                console.log(data);
                console.log("data Added")

                // after person is added do a get for matched person
                // $.get('/result')
            });
            
        })
    </script>

    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
</body>

</html>